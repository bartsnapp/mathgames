pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- exploring surfaces
-- bart snapp


-- based on menu code by colin heyl (kql1n)
-- https://www.lexaloffle.com/bbs/?tid=27735
-- currently doesn't work...
--[[
options={
	"plane", 
	"torus", 
	"sphere",
	"mobius strip", 
	"klein bottle", 
	"real projective plane"
	}

numberofoptions = 6

// stores which menu item is currently selected
selectedoption = 1 


gamestate='menu'
function _update()
	cls()	
	if(gamestate=='torus') then torus()
	elseif(gamestate=='torus') then torus()
	elseif(gamestate=='menu') then menu()
	end
end

function menu()
 // press up to move up the menu
 if(btnp(2)) then
 	selectedoption-=1
 
 // press down to move down the menu
 elseif(btnp(3)) then
 	selectedoption+=1	
 
 // press 🅾️ to select the menu item
 // this changes the gamestate strings
 // so now, the update runs that section instead
 elseif(btnp(4)) then
  if(selectedoption==1)then
   gamestate = 'torus'
   
  elseif(selectedoption==2)then
   gamestate = 'torus'
   
  elseif(selectedoption==3)then
   gamestate = 'torus'
 elseif(selectedoption==4)then
   gamestate = 'torus'

 elseif(selectedoption==5)then
   gamestate = 'torus'

 elseif(selectedoption==6)then
   gamestate = 'torus'

  end
 end

 // this little section just makes sure
 // that your selection doesn't go
 // above or below the max/min 
 if(selectedoption < 1) then
		selectedoption = 1
 elseif(selectedoption > numberofoptions) then
	 selectedoption = numberofoptions
 end
	
	// write out each bit of menu text 
 for i=1,numberofoptions do
		print(options[i],20,20+(12*i),7)
	end
	
	// places a sprite next to the
	// selected menu item
	spr(0,5,19+(12*selectedoption))
	 
	 
	// placeholder example graphics
	// just a title and screen border
 rect(0,0,127,127,6)
 rect(0,0,127,20,6)
 print('main menu',10,9,6)
end
]]


--function torus()

x=63 y=63

function _update()
	if (btn(0)) then x=(x-1)%128 end
	if (btn(1)) then x=(x+1)%128 end
	if (btn(2)) then y=(y-1)%128 end
	if (btn(3)) then y=(y+1)%128 end	
end


facing = 'left'

function _draw()
	palt(13,true)
	palt(0,false)	
	--rectfill(0,0,127,127,3)
	map(0,0,0,0,16,8)
	map(0,0,0,64,16,8)
	if (btn(1) or facing=='right') then facing = 'right'
		for i=4,1,-1 do 
			spr(i,	
				(x+(3-i)*8)%128,
				y%128,1,1,true)
		end 
		for i=20,17,-1 do
			spr(i,
				(x+(19-i)*8)%128,
				(y+8)%128,1,1,true)
		end	
		for i=36,33,-1 do
			spr(i,
				(x+(35-i)*8)%128,
				(y+16)%128,1,1,true)
		end
		for i=52,49,-1 do
			spr(i,
				(x+(51-i)*8)%128,
				(y+24)%128,1,1,true)
		end
	end
	if (btn(0) or facing=='left') then facing = 'left'
		--if (x%2==1) 
			----then 
				for i=1,4 do 
					spr(i,
					(x+(i-2)*8)%128,
					y%128)
				end 
				for i=17,20 do
					spr(i,
					(x+(i-18)*8)%128,
					(y+8)%128)
				end	
				for i=33,36 do
					spr(i,
					(x+(i-34)*8)%128,
					(y+16)%128)
				end
				for i=49,52 do
					spr(i,
					(x+(i-50)*8)%128,
					(y+24)%128)
				end
		end







			--end
			
		--if (x%2==0) 
			--then spr(5,x,y,4,4) end
end
--end
__gfx__
00000000dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd33333333333333330000000000000000000000000000000000000000
00000000ddddd0ddddddddddddddddddddddddddddddd0dddddddddddddddddddddddddd33333333333333330000000000000000000000000000000000000000
00700700dddd000d000ddddddddddddddddddddddddd000d000ddddddddddddddddddddd33333333333bb3330000000000000000000000000000000000000000
00077000ddddd00000ddddddddddddddddddddddddddd00000dddddddddddddddddddddd33333333333b33b30000000000000000000000000000000000000000
00077000ddddd0990dddddddddddddddddddddddddddd0770ddddddddddddddddddddddd33333333bb3b3bb30000000000000000000000000000000000000000
00700700dddd009090dddddddddddddddddddddddddd007070dddddddddddddddddddddd333333333bbbbb3b0000000000000000000000000000000000000000
00000000ddd00909990dddddddddddddddddddddddd00707770ddddddddddddddddddddd3333333333bbb3bb0000000000000000000000000000000000000000
00000000dd099999990ddddddddddddddddddddddd077777770ddddddddddddddddddddd3333333333bbbbb30000000000000000000000000000000000000000
00000000dd009999990ddddddddddddddddddddddd007777770ddddddddddddddddddddd00000000000000000000000000000000000000000000000000000000
00000000ddd00000990dddddddddddddddddddddddd00000770ddddddddddddddddddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddd0990dddddddddddddddddddddddddddd0770ddddddddddddddddddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddd09990ddddddddddddddddddddddddddd07770dddddddddddddddddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddd09990ddddddddddddddddddddddddddd07770dddddddddddddddddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddd09990ddddddddddddddddddddddddddd07770dddddddddddddddddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddd009990dddddddddddddddddddddddddd007770ddddddddddddddddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddd0059900ddddddddddddddddddddddddd0007700dddddddddddddddddd00000000000000000000000000000000000000000000000000000000
00000000dddddddd049990000000000000dddddddddddddd007770000000000000dddddd00000000000000000000000000000000000000000000000000000000
00000000dddddddd0059990500050099900ddddddddddddd0007770000000077700ddddd00000000000000000000000000000000000000000000000000000000
00000000dddddddd0049990450005099900ddddddddddddd0007770000000077700ddddd00000000000000000000000000000000000000000000000000000000
00000000dddddddd000599905405054990dddddddddddddd000077700000000770dddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddddd04999999999999990ddddddddddddddd00777777777777770dddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddddd00599999999999990ddddddddddddddd00077777777777770dddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddddd0009999a999999990ddddddddddddddd00077777777777770dddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddddd000999a9a9a999990ddddddddddddddd00077777777777770dddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddddd09999a4a4a4a99990ddddddddddddddd07777777777777770dddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddddd09990000000009990ddddddddddddddd07770000000007770dddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddddd0990dddddddd0090dddddddddddddddd0770dddddddd0070ddddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddddd0990ddddddddd0990ddddddddddddddd0770ddddddddd0770dddddd00000000000000000000000000000000000000000000000000000000
00000000ddddddddd0990ddddddddd0990ddddddddddddddd0770ddddddddd0770dddddd00000000000000000000000000000000000000000000000000000000
00000000dddddddd0990ddddddddd09990dddddddddddddddd0770ddddddd07770dddddd00000000000000000000000000000000000000000000000000000000
00000000dddddddd0900dddddddd00990ddddddddddddddddd0070dddddd00770ddddddd00000000000000000000000000000000000000000000000000000000
00000000dddddddd000dddddddddd0000dddddddddddddddddd000ddddddd0000ddddddd00000000000000000000000000000000000000000000000000000000
__map__
090909090909090909090909090a090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
090909090a090909090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
090a090909090909090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09090909090909090a0909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090909090a09090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09090a0909090909090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090a09090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
